<html>
<body>
<div style="text-align:center; padding-top:200px; font-size:40px; line-height:80px;">
<div id="timer"></div>
<div id="exercise"></div>
<br />
<img id="img" />
</div>
</body>

<script type="text/coffeescript">
exercises = ["Preparing", "Running in Place", "Resting (Jumping Jacks Next)", "Jumping Jacks", "Resting (Jumping Squats Next)", "Jumping Squats", "Resting (Push Ups Next)", "Push Ups", "Resting (Bicycle Crunch Next)", "Bicycle Crunch", "Resting (Burpees Next)", "Burpees", "Resting (Mason Twist Next)", "Mason Twist", "Resting (Mountain Climbers Next)", "Mountain Climbers", "All Done!"]

timer = document.getElementById("timer")
exercise = document.getElementById("exercise")
img = document.getElementById("img")

go = (time, resting, exerciseIndex) ->
  exercise.innerText = exercises[exerciseIndex]
  if exercises[exerciseIndex + 1] is undefined
    timer.innerText = ""
    return

  timer.innerText = time
  if not resting
    if time < 20
      setTimeout (() -> go time + 1, resting, exerciseIndex), 1000
    else
      setTimeout (() -> go 1, !resting, exerciseIndex + 1), 1000
  else
    if time < 10
      setTimeout (() -> go time + 1, resting, exerciseIndex), 1000
    else
      setTimeout (() -> go 1, !resting, exerciseIndex + 1), 1000
    
go 1, true, 0
</script>
<script src="coffee-script.js"></script>
</html>
